(function(){"use strict";function u(n){return n.toLowerCase().replace("https://","").replace("http://","").replace("main_page","")}function f(n,t){if(!t)return n;var i=new RegExp("(https*://)*"+t,"gi");return n.replace(i,"")}function e(){var t=n.dialog.contents,i=n.dialog.editor,r=i.config.customValues.api_url,o=u(i.config.customValues.wiki_url),e={obj:{htmlContent:f(i.getData(),o)}};if(r){if(!e.obj.htmlContent){CKEDITOR.dialog.getCurrent().hide();alert("Please enter content into the editor first.");return}t.convertContent.loadingMessage.getElement().show();jQuery.ajax({url:r,data:JSON.stringify(e)}).done(function(n){var i=n.ConvertContentResult;t.convertContent.loadingMessage.getElement().hide();t.convertContent.wikiOutput.setValue(i)})}}var n={},i,r;const t="Convert markup";i={type:"textarea",id:"wikiOutput",rows:20,cols:30};r={type:"html",id:"loadingMessage",html:"<span><img src='/plugins/wygiwiki/icons/spinner.gif' style='width:12px;height:12px;' /> Loading<\/span>"};CKEDITOR.plugins.add("wygiwiki",{icons:"wygiwiki",init:function(n){n.addCommand("convertMarkup",new CKEDITOR.dialogCommand("wygiwikiDialog"));n.ui.addButton("Wygiwiki",{label:t,command:"convertMarkup"})}});CKEDITOR.dialog.add("wygiwikiDialog",function(){return{title:t,contents:[{id:"convertContent",label:"To MediaWiki",elements:[r,i]}],onLoad:function(){n.dialog=this._},onShow:e,buttons:[CKEDITOR.dialog.okButton]}})})();
//# sourceMappingURL=plugin.min.js.map