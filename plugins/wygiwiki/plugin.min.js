(function(){"use strict";function o(){this.getInputElement().setAttribute("readOnly",!0)}function s(){i("html")}function h(){i("wiki")}function i(t){var i=n.dialog.contents,u=n.dialog.editor,f=u.config.customValues.convert_url,r={obj:{}};if(f&&t){if(t==="html"&&(r.obj.htmlContent=u.getData()),t==="wiki"&&(r.obj.wikiContent=i.toHTML.wikiInput.getValue()),!r.obj.htmlContent&&!r.obj.wikiContent){t==="html"&&(alert("Please enter something into the editor first."),CKEDITOR.dialog.getCurrent().hide());t==="wiki"&&(alert("Please enter something into the textbox first."),i.toHTML.wikiInput.focus());return}i.toHTML.submitWiki.disable();i.toWiki.submitHTML.disable();jQuery.ajax({url:f,data:JSON.stringify(r)}).done(function(n){var r=n.ConvertContentResult;t==="html"&&i.toWiki.wikiOutput.setValue(r);t==="wiki"&&(u.setData(r),CKEDITOR.dialog.getCurrent().hide())}).always(function(){i.toHTML.submitWiki.enable();i.toWiki.submitHTML.enable()})}}var n={};const t="Convert markup";var r={type:"textarea",id:"wikiOutput",onLoad:o},u={type:"button",id:"submitHTML",label:"Convert to MediaWiki",onClick:s},f={type:"textarea",id:"wikiInput"},e={type:"button",id:"submitWiki",label:"Convert to HTML",onClick:h};CKEDITOR.plugins.add("wygiwiki",{icons:"wygiwiki",init:function(n){n.addCommand("convertMarkup",new CKEDITOR.dialogCommand("wygiwikiDialog"));n.ui.addButton("Wygiwiki",{label:t,command:"convertMarkup"})}});CKEDITOR.dialog.add("wygiwikiDialog",function(){return{title:t,contents:[{id:"toWiki",label:"To MediaWiki",elements:[u,r]},{id:"toHTML",label:"From MediaWiki",elements:[f,e]}],onLoad:function(){n.dialog=this._},buttons:[]}})})();
//# sourceMappingURL=plugin.min.js.map